/*!
 * uniGUI Library extension for Ext JS
 * by Farshad Mohajeri  
 * Copyright(c) 2009-2014 FMSoft Inc.
 * info@fmsoft.net
 * http://www.unigui.com
 !*/
var uniVars={mKeys:{},gNavigate:{},_docKeys_:{},_actFrm_:null,_mFrm_:null,_actPge_:{Id1:"",Id2:""},_mouseMove_:null,_mouseUp_:null,_mouseThis_:null,_maskObjs:[],_maskCnt:0,_actCnt:null,_extVer:null,_dlfrmarr:[],_dlfrmid:0,_frms:[]};function _frmAdd(d,a){var g=-1;var c=uniVars._frms;for(var b=0;b<c.length;b++){if(c[b]===d){g=b;break}}if(a){if(g>=0){c.splice(g,1)}}else{if(g<0){c.push(d)}}}function uniResizeFrm(a,c){var d=uniVars._frms;for(var b=0;b<d.length;b++){ajaxRequest(d[b],"vpsize",{w:a,h:c})}}function _ueval(ss){eval(ss)}function _hde_(d,c){if(typeof d=="object"&&d){if(!d.hasMask){return}if(d.noAutoHide&&c!==true){return}d.noAutoHide=false;var b=0;if(typeof d.UIMask=="object"){if(d.UICnt){b=d.UICnt}if(--b<=0){d.hasMask=false;var a=d.UIMask;if(a.mustWaitData!==true){if(a.__child){a.__child.style.zIndex=a.saveZIndex}a.hide();a.destroy()}d.UICnt=0;d.UIMask=undefined}else{d.UICnt=b}}}}function _shm_(i,d,f){var h="Loading...";var c=0;var a=null;var b=false;if(typeof i=="object"&&i){if(i.ldMask||d){if(typeof i.maskMsg=="string"&&i.maskMsg!=""){h=i.maskMsg}if(i.UICnt!=undefined){c=i.UICnt}i.noAutoHide=f;try{if(c++==0){if(typeof i.targetObj=="object"&&i.targetObj){a=i.targetObj.getEl()}else{if(i.uwindow&&i.uwindow.hidden==false){a=i.uwindow.getEl()}else{if(i.uform){a=i.uform.getEl()}}}try{i.UIMask=new Ext.LoadMask(a,{msg:h});i.UIMask.show();i.UIMask.isBody=b}catch(g){_log(g)}}}finally{i.UICnt=c;i.hasMask=true;if(i.maskWaitData){uniVars._maskObjs.push({o:i,c:0,u:i.UIMask})}}}}}function _hreq_(d,a,c){if(d&&d.exEvents){var b=d.exEvents.ajaxrequest;if(b){b(d,a,c)}}}function _hcbk_(c,b){if(c&&c.exEvents){var a=c.exEvents.ajaxcallback;if(a){a(c,b)}}}function _aexc_(a){var b=a.responseText;if(b&&b.substring(0,3)=="@@@"){a.responseText=b.substring(3);return(true)}return(false)}function ajaxRequest(h,a,b){var k="";var j=encodeURIComponent;if(Ext.isObject(b)){for(var f in b){k=k+"&"+j(f)+"="+j(b[f])}}else{if(b&&b.length){var g=b.length;for(var c=0;c<g;c++){k=k+"&"+j(b[c])}}}if(h.getXType&&h.getXType()=="combo"){_asst_(h)}var d="Ajax=1&IsEvent=1&Obj="+h.nm+"&Evt="+a+k+_gv_(h.uform);Ext.Ajax.request({url:h.owner.appRoot+"HandleEvent",params:d,success:h.owner.ajxS,failure:h.owner.ajxF,obj:h})}function _cdo_(g,c,f,b,d){if(b){if(f){if(g){if(!b[g]){b[g]={}}var a=b[g]}else{var a=b}a.owner=b;a[f]=c;c.uname=f}else{if(g){c.uname=g;b[g]=c}}c.owner=b;c.uform=b.form;c.uwindow=b.window;if(b.form&&b.window&&!b.window.uform){b.window.uform=b.form;b.window.uwindow=b.window}}else{if(c){_ueval(g+"="+c.nm+";")}else{_ueval(g+"={};")}_ueval(g+'.uname="'+g+'";')}if(c){c.monitorUniEvents=true;c.retfalse={};if(c.uniAfterCreate){c.uniAfterCreate()}if(d){d(c)}}}function _coe_(b,g,h,f,d){var c="On"+f.charAt(0).toUpperCase()+f.substring(1);var a=null;if(g){if(h){a=b[g][h]}else{a=b[g]}}else{if(h){a=b[h]}else{a=b}}if(a.on){a.on(f,d)}a[c]=d}function _coxe_(a,f,g,c,b){if(f){if(g){var d=a[f][g]}else{var d=a[f]}}else{if(g){var d=a[g]}else{var d=a}}if(!d.exEvents){d.exEvents=[]}d.exEvents[c]=b}function _gv_(c){var a="";if(c){if(c.getForm){var b=c.getForm()}else{var b=c}a=uniGetValues(b)}if(a!=""){return('&"_fp_='+_S_ID+a+'"')}else{return("&"+_S_ID)}}function _ssz_(d,a,b){if(d.collapsed){var f=d.collapsed;if(f=="left"||f=="right"){if(a!=d.getWidth()){d.expand(false)}}if(f=="top"||f=="bottom"){if(b!=d.getHeight()){d.expand(false)}}}d.setSize(a,b)}Ext.override(Ext.Component,{initComponent:Ext.Function.createInterceptor(Ext.Component.prototype.initComponent,function(){if(this.beforeinit){this.beforeinit(this)}return(true)}),uniCleanup:function(){try{if(this.nm){eval("delete "+this.nm+";");if(this===uniVars._actCnt){uniVars._actCnt=null}if(this===uniVars._actFrm_){uniVars._actFrm_=uniVars._mFrm_}}}catch(e){}},uniAfterCreate:function(){},uniCheckEvent:function(a){if(this.events[a]===true){this.uniHasEvent[a]=true}},destroy:function(){var a=this.isDestroyed;if(!a&&this.manualDestroy===true){return}try{this.uniDestroy()}finally{try{this.callParent()}finally{if(!a){this.uniCleanup()}}}},uniDestroy:function(){if(!this.isDestroyed){if(this.uform&&this.uform.tabItems){this.uform.tabItems.remove(this);if(this.uform.activeField===this){this.uform.activeField=null}}if(this.owner){if(this.rootObj){_frmAdd(this,true);eval("delete "+this.owner.uname+";")}else{if(this.uname){this.owner[this.uname]=null}}}}},setPendingElProps:function(){if(this.elArray){var b=this.elArray;while(b.length>0){e=b.pop();this.setElProp(e.prop,e.val,e.mtd,e.cs,true,e.elname)}}},afterRender:function(){var a=this;a.callParent();a.initUniEvents();a.setPendingElProps()},initUniEvents:function(){},showMask:function(b,a){if(b){this.maskMsg=b}if(a){this.targetObj=a}else{if(this.uform){this.targetObj=this.uform}}_shm_(this,true)},hideMask:function(){_hde_(this)},setElProp:function(a,d,l,h,k,j){if(j){var c=this[j];if(Ext.isObject(c)&&c.isComponent){c=c.el}}else{if(this.getEl){var c=this.getEl()}else{var c=this.element}}if(c){switch(l){case 0:c.setStyle(a,d);break;case 1:c.down(h).setStyle(a,d);break;case 2:if(c.dom){c.dom[a]=d}break;case 3:if(c.dom&&c.dom.style){c.dom.style[a]=d}break;case 4:if(this.setFieldStyle){if(d){this.setFieldStyle(a+":"+d)}else{this.setFieldStyle(a)}}break;case 5:var g=Ext.DomQuery.select(h,c.dom,null,false);if(g&&g.length){for(var f=0;f<g.length;f++){if(Ext.isObject(a)){for(var b in a){if(g[f].style){g[f].style[b]=a[b]}}}}}break}}else{if(k!==true){if(this.elArray==undefined){this.elArray=[]}this.elArray.push({prop:a,val:d,mtd:l,cs:h,elname:j})}}},setBodyProp:function(c,b){var a=this.body;if(a){a.setStyle(c,b)}}});var _ajxerr=false;var _showAjaxErr=false;var _ajxflerr="Server unavailable, please try later";function AjaxError(a,b){if(_ajxerr){return}_ajxerr=true;Ext.Msg.show({title:"Ajax Error",multiline:true,value:b,width:400,minWidth:200,msg:a,icon:Ext.Msg.ERROR,buttons:Ext.Msg.OK,fn:function(){_ajxerr=false}})}function AjaxSuccess(rs){if(_aexc_(rs)){return}try{eval(rs.responseText)}catch(err){if(_showAjaxErr){AjaxError(err.message,rs.responseText)}}}function AjaxFailure(){AjaxError(_ajxflerr)}function _ifrm_(c){function a(i){var f="";i=i.dom;if(i){try{var h=i.contentWindow.document||i.contentDocument||window.frames[i.id].document;if(h){if(Ext.isOpera&&h.location=="about:blank"){return}if(h.body){if((contentNode=h.body.firstChild)&&/pre/i.test(contentNode.tagName)){f=contentNode.textContent}else{if((contentNode=h.getElementsByTagName("textarea")[0])){f=contentNode.value}else{f=h.body.textContent||h.body.innerText}}}}if(f&&f!=""){AjaxSuccess({responseText:f})}}catch(g){var d="";if(f&&f!=""){d=f}AjaxError(g.message,d)}}}var b=Ext.DomHelper.append(document.body,{tag:"iframe",id:c,name:c,frameBorder:0,width:0,height:0,css:"display:none;visibility:hidden;height:0px;",src:Ext.SSL_SECURE_URL},true);Ext.fly(b).on("load",Ext.Function.bind(a,this,[b]))};